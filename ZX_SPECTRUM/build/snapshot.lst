ARM GAS  /tmp/ccFtdM7s.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"snapshot.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.snapshot_decompression1,"ax",%progbits
  16              		.align	1
  17              		.arch armv7-m
  18              		.syntax unified
  19              		.thumb
  20              		.thumb_func
  21              		.fpu softvfp
  23              	snapshot_decompression1:
  24              	.LVL0:
  25              	.LFB1:
  26              		.file 1 "emulator/snapshot/snapshot.c"
   1:emulator/snapshot/snapshot.c **** #include "snapshot.h"
   2:emulator/snapshot/snapshot.c **** #include "logger.h"
   3:emulator/snapshot/snapshot.c **** #include "mem.h"
   4:emulator/snapshot/snapshot.c **** #include "emulator.h"
   5:emulator/snapshot/snapshot.c **** #include "screen.h"
   6:emulator/snapshot/snapshot.c **** 
   7:emulator/snapshot/snapshot.c **** #define SNAPSHOT_FILE_VERSION_VALID         (0)
   8:emulator/snapshot/snapshot.c **** #define SNAPSHOT_LENGTH_MEANS_VERSION_2_1   (0x17)
   9:emulator/snapshot/snapshot.c **** #define SNAPSHOT_LENGTH_MEANS_VERSION_3_0   (0x36)
  10:emulator/snapshot/snapshot.c **** #define SNAPSHOT_FILE_VERSION_2_1           ("2.1")
  11:emulator/snapshot/snapshot.c **** #define SNAPSHOT_FILE_VERSION_3_0           ("3.0")
  12:emulator/snapshot/snapshot.c **** #define SNAPSHOT_LENGTH_TO_VERSION(_HEADER_LEN_)            \
  13:emulator/snapshot/snapshot.c ****     ((_HEADER_LEN_ == SNAPSHOT_LENGTH_MEANS_VERSION_2_1) ?  \
  14:emulator/snapshot/snapshot.c ****       SNAPSHOT_FILE_VERSION_2_1 :                           \
  15:emulator/snapshot/snapshot.c ****       SNAPSHOT_FILE_VERSION_3_0)
  16:emulator/snapshot/snapshot.c **** 
  17:emulator/snapshot/snapshot.c **** #define MEM_PAGE_1                          (0x8000)
  18:emulator/snapshot/snapshot.c **** #define MEM_PAGE_2                          (0xC000)
  19:emulator/snapshot/snapshot.c **** #define MEM_PAGE_5                          (0x4000)
  20:emulator/snapshot/snapshot.c **** #define MEM_PAGE_FULL_SIZE                  (0x4000)
  21:emulator/snapshot/snapshot.c **** 
  22:emulator/snapshot/snapshot.c **** #define IS_DATA_COMPRESSED(_DATA_SIZE_)     (_DATA_SIZE_ != 0xFFFF)
  23:emulator/snapshot/snapshot.c **** 
  24:emulator/snapshot/snapshot.c **** #define COMPRESSION_SEQUENCE_SIZE           (4)
  25:emulator/snapshot/snapshot.c **** #define COMPRESSION_SEQUENCE                (0xEDED)
  26:emulator/snapshot/snapshot.c **** #define COMPRESSION_END_MARKER              (0x00EDED00)
  27:emulator/snapshot/snapshot.c **** 
  28:emulator/snapshot/snapshot.c **** typedef enum
  29:emulator/snapshot/snapshot.c **** {
  30:emulator/snapshot/snapshot.c ****     PAGE_TYPE_0 = 0, /* 48K rom         rom (basic)     48K rom (Not suported)*/
  31:emulator/snapshot/snapshot.c ****     PAGE_TYPE_4 = 4, /* 8000-bfff       page 1          Normal 8000-bfff*/
  32:emulator/snapshot/snapshot.c ****     PAGE_TYPE_5 = 5, /* c000-ffff       page 2          Normal c000-ffff*/
ARM GAS  /tmp/ccFtdM7s.s 			page 2


  33:emulator/snapshot/snapshot.c ****     PAGE_TYPE_8 = 8  /* 4000-7fff       page 5          4000-7fff*/
  34:emulator/snapshot/snapshot.c **** } page_type_t;
  35:emulator/snapshot/snapshot.c **** 
  36:emulator/snapshot/snapshot.c **** typedef enum
  37:emulator/snapshot/snapshot.c **** {
  38:emulator/snapshot/snapshot.c ****     HARDWARE_MODE_0 = 0, /* 48k        */
  39:emulator/snapshot/snapshot.c ****     HARDWARE_MODE_1      /* 48k + If.1 */
  40:emulator/snapshot/snapshot.c **** } hardware_mode_t;
  41:emulator/snapshot/snapshot.c **** 
  42:emulator/snapshot/snapshot.c **** typedef struct __attribute__((packed))
  43:emulator/snapshot/snapshot.c **** {
  44:emulator/snapshot/snapshot.c ****     uint16_t len;
  45:emulator/snapshot/snapshot.c ****     uint8_t  page_type;
  46:emulator/snapshot/snapshot.c ****     uint8_t  data[];
  47:emulator/snapshot/snapshot.c **** } block_info_t;
  48:emulator/snapshot/snapshot.c **** 
  49:emulator/snapshot/snapshot.c **** static void snapshot_set_state(const snapshot_header_t *header,
  50:emulator/snapshot/snapshot.c ****                                const snapshot_add_header_t *add_header)
  51:emulator/snapshot/snapshot.c **** {
  52:emulator/snapshot/snapshot.c ****     Z80_STATE *cpu = emulator_cpu_state_get();
  53:emulator/snapshot/snapshot.c ****     uint8_t flags1 = (header->flags1.intr == 255) ? 1 : header->flags1.intr;
  54:emulator/snapshot/snapshot.c **** 
  55:emulator/snapshot/snapshot.c **** 	cpu->registers.byte[Z80_A]  = header->a;
  56:emulator/snapshot/snapshot.c **** 	cpu->registers.byte[Z80_F]  = header->f;
  57:emulator/snapshot/snapshot.c **** 	cpu->registers.word[Z80_BC] = header->bc;
  58:emulator/snapshot/snapshot.c **** 	cpu->registers.word[Z80_HL] = header->hl;
  59:emulator/snapshot/snapshot.c **** 	cpu->registers.word[Z80_SP] = header->sp;
  60:emulator/snapshot/snapshot.c **** 	cpu->i  = header->interrupt_register;
  61:emulator/snapshot/snapshot.c **** 	cpu->r  = (header->refresh_register & 0x7F) | ((flags1 & 0x01) << 7);
  62:emulator/snapshot/snapshot.c **** 	cpu->im = header->flags2 & 0x3;
  63:emulator/snapshot/snapshot.c **** 	cpu->registers.word[Z80_DE] = header->de;
  64:emulator/snapshot/snapshot.c **** 	cpu->alternates[Z80_BC] = header->bc_dash;
  65:emulator/snapshot/snapshot.c **** 	cpu->alternates[Z80_DE] = header->de_dash;
  66:emulator/snapshot/snapshot.c **** 	cpu->alternates[Z80_HL] = header->hl_dash;
  67:emulator/snapshot/snapshot.c **** 	cpu->alternates[Z80_AF] = header->f_dash | (header->a_dash << 8);
  68:emulator/snapshot/snapshot.c **** 	cpu->registers.word[Z80_IY] = header->IY;
  69:emulator/snapshot/snapshot.c **** 	cpu->registers.word[Z80_IX] = header->IX;
  70:emulator/snapshot/snapshot.c **** 	cpu->iff1 = header->interrupt_flip_flop;
  71:emulator/snapshot/snapshot.c **** 	cpu->iff2 = header->IFF2;
  72:emulator/snapshot/snapshot.c ****     if (add_header != 0)
  73:emulator/snapshot/snapshot.c ****     {
  74:emulator/snapshot/snapshot.c **** 	    cpu->pc   = add_header->pc;
  75:emulator/snapshot/snapshot.c ****     }
  76:emulator/snapshot/snapshot.c ****     else{
  77:emulator/snapshot/snapshot.c ****         cpu->pc = header->version;
  78:emulator/snapshot/snapshot.c ****     }
  79:emulator/snapshot/snapshot.c ****     screen_draw_border((flags1 & 0x0E) >> 1);
  80:emulator/snapshot/snapshot.c **** }
  81:emulator/snapshot/snapshot.c **** 
  82:emulator/snapshot/snapshot.c **** static void snapshot_decompression1(const uint8_t *data, uint16_t len)
  83:emulator/snapshot/snapshot.c **** {
  27              		.loc 1 83 1 view -0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		.loc 1 83 1 is_stmt 0 view .LVU1
  32 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
ARM GAS  /tmp/ccFtdM7s.s 			page 3


  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 32
  35              		.cfi_offset 3, -32
  36              		.cfi_offset 4, -28
  37              		.cfi_offset 5, -24
  38              		.cfi_offset 6, -20
  39              		.cfi_offset 7, -16
  40              		.cfi_offset 8, -12
  41              		.cfi_offset 9, -8
  42              		.cfi_offset 14, -4
  43 0004 0746     		mov	r7, r0
  44 0006 0E46     		mov	r6, r1
  84:emulator/snapshot/snapshot.c ****     bool compressed = true;
  45              		.loc 1 84 5 is_stmt 1 view .LVU2
  46              	.LVL1:
  85:emulator/snapshot/snapshot.c ****     uint16_t mem_addr = 0x4000;
  47              		.loc 1 85 5 view .LVU3
  86:emulator/snapshot/snapshot.c **** 
  87:emulator/snapshot/snapshot.c ****     for (uint16_t i = 0; i < len; ++i)
  48              		.loc 1 87 5 view .LVU4
  49              	.LBB2:
  50              		.loc 1 87 10 view .LVU5
  51              		.loc 1 87 19 is_stmt 0 view .LVU6
  52 0008 0024     		movs	r4, #0
  53              	.LBE2:
  85:emulator/snapshot/snapshot.c ****     uint16_t mem_addr = 0x4000;
  54              		.loc 1 85 14 view .LVU7
  55 000a 4FF48040 		mov	r0, #16384
  56              	.LVL2:
  57              	.LBB7:
  58              		.loc 1 87 5 view .LVU8
  59 000e 15E0     		b	.L2
  60              	.LVL3:
  61              	.L5:
  62              	.LBB3:
  63              	.LBB4:
  88:emulator/snapshot/snapshot.c ****     {
  89:emulator/snapshot/snapshot.c ****         if (i > len -4)
  90:emulator/snapshot/snapshot.c ****         {
  91:emulator/snapshot/snapshot.c ****             /* Looking the end-marker. (Only for header version up to 1.4)*/
  92:emulator/snapshot/snapshot.c ****             uint8_t data32 = *(uint32_t *) &data[i];
  93:emulator/snapshot/snapshot.c ****             if (compressed && data32 == COMPRESSION_END_MARKER)
  94:emulator/snapshot/snapshot.c **** 			{
  95:emulator/snapshot/snapshot.c **** 				break;
  96:emulator/snapshot/snapshot.c **** 			}
  97:emulator/snapshot/snapshot.c **** 
  98:emulator/snapshot/snapshot.c ****             uint16_t data16 = *(uint16_t *) &data[i];
  99:emulator/snapshot/snapshot.c ****             if (compressed && data16 == COMPRESSION_SEQUENCE)
 100:emulator/snapshot/snapshot.c ****             {
 101:emulator/snapshot/snapshot.c ****                 i += sizeof(data16); /* size of COMPRESSION_SEQUENCE. */
 102:emulator/snapshot/snapshot.c **** 
 103:emulator/snapshot/snapshot.c ****                 uint8_t repeats = data[i++];
 104:emulator/snapshot/snapshot.c ****                 uint8_t value   = data[i];
 105:emulator/snapshot/snapshot.c ****                 while (repeats--)
 106:emulator/snapshot/snapshot.c ****                 {
 107:emulator/snapshot/snapshot.c ****                     mem_writebyte(mem_addr++, value);
  64              		.loc 1 107 21 is_stmt 1 view .LVU9
ARM GAS  /tmp/ccFtdM7s.s 			page 4


  65 0010 00F10108 		add	r8, r0, #1
  66 0014 1FFA88F8 		uxth	r8, r8
  67              	.LVL4:
  68              		.loc 1 107 21 is_stmt 0 view .LVU10
  69 0018 4946     		mov	r1, r9
  70 001a FFF7FEFF 		bl	mem_writebyte
  71              	.LVL5:
 105:emulator/snapshot/snapshot.c ****                 {
  72              		.loc 1 105 31 view .LVU11
  73 001e 2B46     		mov	r3, r5
  74              		.loc 1 107 21 view .LVU12
  75 0020 4046     		mov	r0, r8
  76              	.LVL6:
  77              	.L4:
 105:emulator/snapshot/snapshot.c ****                 {
  78              		.loc 1 105 23 is_stmt 1 view .LVU13
 105:emulator/snapshot/snapshot.c ****                 {
  79              		.loc 1 105 31 is_stmt 0 view .LVU14
  80 0022 5D1E     		subs	r5, r3, #1
  81 0024 EDB2     		uxtb	r5, r5
  82              	.LVL7:
 105:emulator/snapshot/snapshot.c ****                 {
  83              		.loc 1 105 23 view .LVU15
  84 0026 002B     		cmp	r3, #0
  85 0028 F2D1     		bne	.L5
  86 002a 05E0     		b	.L6
  87              	.LVL8:
  88              	.L3:
 105:emulator/snapshot/snapshot.c ****                 {
  89              		.loc 1 105 23 view .LVU16
  90              	.LBE4:
  91              	.LBE3:
 108:emulator/snapshot/snapshot.c ****                 }
 109:emulator/snapshot/snapshot.c **** 
 110:emulator/snapshot/snapshot.c ****                 continue;
 111:emulator/snapshot/snapshot.c ****             }
 112:emulator/snapshot/snapshot.c ****         }
 113:emulator/snapshot/snapshot.c **** 
 114:emulator/snapshot/snapshot.c ****         mem_writebyte(mem_addr++, data[i]);
  92              		.loc 1 114 9 is_stmt 1 view .LVU17
  93 002c 451C     		adds	r5, r0, #1
  94 002e ADB2     		uxth	r5, r5
  95              	.LVL9:
  96              		.loc 1 114 9 is_stmt 0 view .LVU18
  97 0030 395D     		ldrb	r1, [r7, r4]	@ zero_extendqisi2
  98 0032 FFF7FEFF 		bl	mem_writebyte
  99              	.LVL10:
 100 0036 2846     		mov	r0, r5
 101              	.LVL11:
 102              	.L6:
  87:emulator/snapshot/snapshot.c ****     {
 103              		.loc 1 87 35 is_stmt 1 discriminator 2 view .LVU19
 104 0038 0134     		adds	r4, r4, #1
 105              	.LVL12:
  87:emulator/snapshot/snapshot.c ****     {
 106              		.loc 1 87 35 is_stmt 0 discriminator 2 view .LVU20
 107 003a A4B2     		uxth	r4, r4
ARM GAS  /tmp/ccFtdM7s.s 			page 5


 108              	.LVL13:
 109              	.L2:
  87:emulator/snapshot/snapshot.c ****     {
 110              		.loc 1 87 26 is_stmt 1 discriminator 1 view .LVU21
  87:emulator/snapshot/snapshot.c ****     {
 111              		.loc 1 87 5 is_stmt 0 discriminator 1 view .LVU22
 112 003c B442     		cmp	r4, r6
 113 003e 0FD2     		bcs	.L9
  89:emulator/snapshot/snapshot.c ****         {
 114              		.loc 1 89 9 is_stmt 1 view .LVU23
  89:emulator/snapshot/snapshot.c ****         {
 115              		.loc 1 89 15 is_stmt 0 view .LVU24
 116 0040 F31E     		subs	r3, r6, #3
  89:emulator/snapshot/snapshot.c ****         {
 117              		.loc 1 89 12 view .LVU25
 118 0042 A342     		cmp	r3, r4
 119 0044 F2DC     		bgt	.L3
 120              	.LBB6:
  92:emulator/snapshot/snapshot.c ****             if (compressed && data32 == COMPRESSION_END_MARKER)
 121              		.loc 1 92 13 is_stmt 1 view .LVU26
 122              	.LVL14:
  93:emulator/snapshot/snapshot.c **** 			{
 123              		.loc 1 93 13 view .LVU27
  98:emulator/snapshot/snapshot.c ****             if (compressed && data16 == COMPRESSION_SEQUENCE)
 124              		.loc 1 98 13 view .LVU28
  98:emulator/snapshot/snapshot.c ****             if (compressed && data16 == COMPRESSION_SEQUENCE)
 125              		.loc 1 98 22 is_stmt 0 view .LVU29
 126 0046 3A5B     		ldrh	r2, [r7, r4]
 127              	.LVL15:
  99:emulator/snapshot/snapshot.c ****             {
 128              		.loc 1 99 13 is_stmt 1 view .LVU30
  99:emulator/snapshot/snapshot.c ****             {
 129              		.loc 1 99 28 is_stmt 0 view .LVU31
 130 0048 4EF6ED53 		movw	r3, #60909
 131 004c 9A42     		cmp	r2, r3
 132 004e EDD1     		bne	.L3
 133              	.LBB5:
 101:emulator/snapshot/snapshot.c **** 
 134              		.loc 1 101 17 is_stmt 1 view .LVU32
 101:emulator/snapshot/snapshot.c **** 
 135              		.loc 1 101 19 is_stmt 0 view .LVU33
 136 0050 A31C     		adds	r3, r4, #2
 137 0052 9BB2     		uxth	r3, r3
 138              	.LVL16:
 103:emulator/snapshot/snapshot.c ****                 uint8_t value   = data[i];
 139              		.loc 1 103 17 is_stmt 1 view .LVU34
 103:emulator/snapshot/snapshot.c ****                 uint8_t value   = data[i];
 140              		.loc 1 103 41 is_stmt 0 view .LVU35
 141 0054 0334     		adds	r4, r4, #3
 142              	.LVL17:
 103:emulator/snapshot/snapshot.c ****                 uint8_t value   = data[i];
 143              		.loc 1 103 41 view .LVU36
 144 0056 A4B2     		uxth	r4, r4
 145              	.LVL18:
 103:emulator/snapshot/snapshot.c ****                 uint8_t value   = data[i];
 146              		.loc 1 103 25 view .LVU37
 147 0058 FB5C     		ldrb	r3, [r7, r3]	@ zero_extendqisi2
ARM GAS  /tmp/ccFtdM7s.s 			page 6


 148              	.LVL19:
 104:emulator/snapshot/snapshot.c ****                 while (repeats--)
 149              		.loc 1 104 17 is_stmt 1 view .LVU38
 104:emulator/snapshot/snapshot.c ****                 while (repeats--)
 150              		.loc 1 104 25 is_stmt 0 view .LVU39
 151 005a 17F80490 		ldrb	r9, [r7, r4]	@ zero_extendqisi2
 152              	.LVL20:
 105:emulator/snapshot/snapshot.c ****                 {
 153              		.loc 1 105 17 is_stmt 1 view .LVU40
 105:emulator/snapshot/snapshot.c ****                 {
 154              		.loc 1 105 23 is_stmt 0 view .LVU41
 155 005e E0E7     		b	.L4
 156              	.LVL21:
 157              	.L9:
 105:emulator/snapshot/snapshot.c ****                 {
 158              		.loc 1 105 23 view .LVU42
 159              	.LBE5:
 160              	.LBE6:
 161              	.LBE7:
 115:emulator/snapshot/snapshot.c ****     }   
 116:emulator/snapshot/snapshot.c **** }
 162              		.loc 1 116 1 view .LVU43
 163 0060 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 164              		.loc 1 116 1 view .LVU44
 165              		.cfi_endproc
 166              	.LFE1:
 168              		.section	.text.snapshot_decompression,"ax",%progbits
 169              		.align	1
 170              		.syntax unified
 171              		.thumb
 172              		.thumb_func
 173              		.fpu softvfp
 175              	snapshot_decompression:
 176              	.LVL22:
 177              	.LFB2:
 117:emulator/snapshot/snapshot.c **** static void snapshot_decompression(const block_info_t *block)
 118:emulator/snapshot/snapshot.c **** {
 178              		.loc 1 118 1 is_stmt 1 view -0
 179              		.cfi_startproc
 180              		@ args = 0, pretend = 0, frame = 0
 181              		@ frame_needed = 0, uses_anonymous_args = 0
 182              		.loc 1 118 1 is_stmt 0 view .LVU46
 183 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 184              	.LCFI1:
 185              		.cfi_def_cfa_offset 32
 186              		.cfi_offset 4, -32
 187              		.cfi_offset 5, -28
 188              		.cfi_offset 6, -24
 189              		.cfi_offset 7, -20
 190              		.cfi_offset 8, -16
 191              		.cfi_offset 9, -12
 192              		.cfi_offset 10, -8
 193              		.cfi_offset 14, -4
 194 0004 0646     		mov	r6, r0
 119:emulator/snapshot/snapshot.c ****     uint16_t mem_addr;
 195              		.loc 1 119 5 is_stmt 1 view .LVU47
 120:emulator/snapshot/snapshot.c ****     switch (block->page_type)
ARM GAS  /tmp/ccFtdM7s.s 			page 7


 196              		.loc 1 120 5 view .LVU48
 197              		.loc 1 120 18 is_stmt 0 view .LVU49
 198 0006 8378     		ldrb	r3, [r0, #2]	@ zero_extendqisi2
 199              		.loc 1 120 5 view .LVU50
 200 0008 052B     		cmp	r3, #5
 201 000a 10D0     		beq	.L20
 202 000c 082B     		cmp	r3, #8
 203 000e 11D0     		beq	.L21
 204 0010 042B     		cmp	r3, #4
 205 0012 01D0     		beq	.L24
 206              	.LVL23:
 207              	.L10:
 121:emulator/snapshot/snapshot.c ****     {
 122:emulator/snapshot/snapshot.c ****         case PAGE_TYPE_4: mem_addr = MEM_PAGE_1; break;
 123:emulator/snapshot/snapshot.c ****         case PAGE_TYPE_5: mem_addr = MEM_PAGE_2; break;
 124:emulator/snapshot/snapshot.c ****         case PAGE_TYPE_8: mem_addr = MEM_PAGE_5; break;
 125:emulator/snapshot/snapshot.c ****         default: return;
 126:emulator/snapshot/snapshot.c ****     }
 127:emulator/snapshot/snapshot.c **** 
 128:emulator/snapshot/snapshot.c ****     bool     compressed;
 129:emulator/snapshot/snapshot.c ****     uint16_t page_size;
 130:emulator/snapshot/snapshot.c ****     if (IS_DATA_COMPRESSED(block->len))
 131:emulator/snapshot/snapshot.c ****     {
 132:emulator/snapshot/snapshot.c ****         page_size  = block->len;
 133:emulator/snapshot/snapshot.c ****         compressed = true;
 134:emulator/snapshot/snapshot.c ****     }
 135:emulator/snapshot/snapshot.c ****     else
 136:emulator/snapshot/snapshot.c ****     {
 137:emulator/snapshot/snapshot.c ****         page_size  = MEM_PAGE_FULL_SIZE;
 138:emulator/snapshot/snapshot.c ****         compressed = false;
 139:emulator/snapshot/snapshot.c ****     }
 140:emulator/snapshot/snapshot.c **** 
 141:emulator/snapshot/snapshot.c ****     for (uint16_t i = 0; i < page_size; ++i)
 142:emulator/snapshot/snapshot.c ****     {
 143:emulator/snapshot/snapshot.c ****         if ((page_size - i) > COMPRESSION_SEQUENCE_SIZE)
 144:emulator/snapshot/snapshot.c ****         {
 145:emulator/snapshot/snapshot.c ****             /* Looking the end-marker. (Only for header version up to 1.4)*/
 146:emulator/snapshot/snapshot.c ****             uint8_t data32 = *(uint32_t *) &block->data[i];
 147:emulator/snapshot/snapshot.c ****             if (compressed && data32 == COMPRESSION_END_MARKER)
 148:emulator/snapshot/snapshot.c **** 			{
 149:emulator/snapshot/snapshot.c **** 				break;
 150:emulator/snapshot/snapshot.c **** 			}
 151:emulator/snapshot/snapshot.c **** 
 152:emulator/snapshot/snapshot.c ****             uint16_t data16 = *(uint16_t *) &block->data[i];
 153:emulator/snapshot/snapshot.c ****             if (compressed && data16 == COMPRESSION_SEQUENCE)
 154:emulator/snapshot/snapshot.c ****             {
 155:emulator/snapshot/snapshot.c ****                 i += sizeof(data16); /* size of COMPRESSION_SEQUENCE. */
 156:emulator/snapshot/snapshot.c **** 
 157:emulator/snapshot/snapshot.c ****                 uint8_t repeats = block->data[i++];
 158:emulator/snapshot/snapshot.c ****                 uint8_t value   = block->data[i];
 159:emulator/snapshot/snapshot.c ****                 while (repeats--)
 160:emulator/snapshot/snapshot.c ****                 {
 161:emulator/snapshot/snapshot.c ****                     mem_writebyte(mem_addr++, value);
 162:emulator/snapshot/snapshot.c ****                 }
 163:emulator/snapshot/snapshot.c **** 
 164:emulator/snapshot/snapshot.c ****                 continue;
 165:emulator/snapshot/snapshot.c ****             }
ARM GAS  /tmp/ccFtdM7s.s 			page 8


 166:emulator/snapshot/snapshot.c ****         }
 167:emulator/snapshot/snapshot.c **** 
 168:emulator/snapshot/snapshot.c ****         mem_writebyte(mem_addr++, block->data[i]);
 169:emulator/snapshot/snapshot.c ****     }
 170:emulator/snapshot/snapshot.c **** }
 208              		.loc 1 170 1 view .LVU51
 209 0014 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 210              	.LVL24:
 211              	.L24:
 120:emulator/snapshot/snapshot.c ****     switch (block->page_type)
 212              		.loc 1 120 5 view .LVU52
 213 0018 4FF40040 		mov	r0, #32768
 214              	.LVL25:
 215              	.L11:
 128:emulator/snapshot/snapshot.c ****     uint16_t page_size;
 216              		.loc 1 128 5 is_stmt 1 view .LVU53
 129:emulator/snapshot/snapshot.c ****     if (IS_DATA_COMPRESSED(block->len))
 217              		.loc 1 129 5 view .LVU54
 130:emulator/snapshot/snapshot.c ****     {
 218              		.loc 1 130 5 view .LVU55
 130:emulator/snapshot/snapshot.c ****     {
 219              		.loc 1 130 9 is_stmt 0 view .LVU56
 220 001c 3788     		ldrh	r7, [r6]	@ unaligned
 130:emulator/snapshot/snapshot.c ****     {
 221              		.loc 1 130 8 view .LVU57
 222 001e 4FF6FF73 		movw	r3, #65535
 223 0022 9F42     		cmp	r7, r3
 224 0024 09D0     		beq	.L25
 133:emulator/snapshot/snapshot.c ****     }
 225              		.loc 1 133 20 view .LVU58
 226 0026 4FF00108 		mov	r8, #1
 227              	.L13:
 228              	.LVL26:
 141:emulator/snapshot/snapshot.c ****     {
 229              		.loc 1 141 5 is_stmt 1 view .LVU59
 230              	.LBB8:
 141:emulator/snapshot/snapshot.c ****     {
 231              		.loc 1 141 10 view .LVU60
 141:emulator/snapshot/snapshot.c ****     {
 232              		.loc 1 141 19 is_stmt 0 view .LVU61
 233 002a 0024     		movs	r4, #0
 141:emulator/snapshot/snapshot.c ****     {
 234              		.loc 1 141 5 view .LVU62
 235 002c 21E0     		b	.L14
 236              	.LVL27:
 237              	.L20:
 141:emulator/snapshot/snapshot.c ****     {
 238              		.loc 1 141 5 view .LVU63
 239              	.LBE8:
 123:emulator/snapshot/snapshot.c ****         case PAGE_TYPE_8: mem_addr = MEM_PAGE_5; break;
 240              		.loc 1 123 36 view .LVU64
 241 002e 4FF44040 		mov	r0, #49152
 242              	.LVL28:
 123:emulator/snapshot/snapshot.c ****         case PAGE_TYPE_8: mem_addr = MEM_PAGE_5; break;
 243              		.loc 1 123 36 view .LVU65
 244 0032 F3E7     		b	.L11
 245              	.LVL29:
ARM GAS  /tmp/ccFtdM7s.s 			page 9


 246              	.L21:
 124:emulator/snapshot/snapshot.c ****         default: return;
 247              		.loc 1 124 36 view .LVU66
 248 0034 4FF48040 		mov	r0, #16384
 249              	.LVL30:
 124:emulator/snapshot/snapshot.c ****         default: return;
 250              		.loc 1 124 36 view .LVU67
 251 0038 F0E7     		b	.L11
 252              	.LVL31:
 253              	.L25:
 137:emulator/snapshot/snapshot.c ****         compressed = false;
 254              		.loc 1 137 20 view .LVU68
 255 003a 4FF48047 		mov	r7, #16384
 138:emulator/snapshot/snapshot.c ****     }
 256              		.loc 1 138 20 view .LVU69
 257 003e 4FF00008 		mov	r8, #0
 258 0042 F2E7     		b	.L13
 259              	.LVL32:
 260              	.L17:
 261              	.LBB13:
 262              	.LBB9:
 263              	.LBB10:
 161:emulator/snapshot/snapshot.c ****                 }
 264              		.loc 1 161 21 is_stmt 1 view .LVU70
 265 0044 00F10109 		add	r9, r0, #1
 266 0048 1FFA89F9 		uxth	r9, r9
 267              	.LVL33:
 161:emulator/snapshot/snapshot.c ****                 }
 268              		.loc 1 161 21 is_stmt 0 view .LVU71
 269 004c 5146     		mov	r1, r10
 270 004e FFF7FEFF 		bl	mem_writebyte
 271              	.LVL34:
 159:emulator/snapshot/snapshot.c ****                 {
 272              		.loc 1 159 31 view .LVU72
 273 0052 2B46     		mov	r3, r5
 161:emulator/snapshot/snapshot.c ****                 }
 274              		.loc 1 161 21 view .LVU73
 275 0054 4846     		mov	r0, r9
 276              	.LVL35:
 277              	.L16:
 159:emulator/snapshot/snapshot.c ****                 {
 278              		.loc 1 159 23 is_stmt 1 view .LVU74
 159:emulator/snapshot/snapshot.c ****                 {
 279              		.loc 1 159 31 is_stmt 0 view .LVU75
 280 0056 5D1E     		subs	r5, r3, #1
 281 0058 EDB2     		uxtb	r5, r5
 282              	.LVL36:
 159:emulator/snapshot/snapshot.c ****                 {
 283              		.loc 1 159 23 view .LVU76
 284 005a 002B     		cmp	r3, #0
 285 005c F2D1     		bne	.L17
 286 005e 06E0     		b	.L18
 287              	.LVL37:
 288              	.L15:
 159:emulator/snapshot/snapshot.c ****                 {
 289              		.loc 1 159 23 view .LVU77
 290              	.LBE10:
ARM GAS  /tmp/ccFtdM7s.s 			page 10


 291              	.LBE9:
 168:emulator/snapshot/snapshot.c ****     }
 292              		.loc 1 168 9 is_stmt 1 view .LVU78
 293 0060 451C     		adds	r5, r0, #1
 294 0062 ADB2     		uxth	r5, r5
 295              	.LVL38:
 168:emulator/snapshot/snapshot.c ****     }
 296              		.loc 1 168 9 is_stmt 0 view .LVU79
 297 0064 3344     		add	r3, r3, r6
 298 0066 D978     		ldrb	r1, [r3, #3]	@ zero_extendqisi2
 299 0068 FFF7FEFF 		bl	mem_writebyte
 300              	.LVL39:
 301 006c 2846     		mov	r0, r5
 302              	.LVL40:
 303              	.L18:
 141:emulator/snapshot/snapshot.c ****     {
 304              		.loc 1 141 41 is_stmt 1 discriminator 2 view .LVU80
 305 006e 0134     		adds	r4, r4, #1
 306              	.LVL41:
 141:emulator/snapshot/snapshot.c ****     {
 307              		.loc 1 141 41 is_stmt 0 discriminator 2 view .LVU81
 308 0070 A4B2     		uxth	r4, r4
 309              	.LVL42:
 310              	.L14:
 141:emulator/snapshot/snapshot.c ****     {
 311              		.loc 1 141 26 is_stmt 1 discriminator 1 view .LVU82
 141:emulator/snapshot/snapshot.c ****     {
 312              		.loc 1 141 5 is_stmt 0 discriminator 1 view .LVU83
 313 0072 A742     		cmp	r7, r4
 314 0074 CED9     		bls	.L10
 143:emulator/snapshot/snapshot.c ****         {
 315              		.loc 1 143 9 is_stmt 1 view .LVU84
 143:emulator/snapshot/snapshot.c ****         {
 316              		.loc 1 143 24 is_stmt 0 view .LVU85
 317 0076 2346     		mov	r3, r4
 318 0078 3A1B     		subs	r2, r7, r4
 143:emulator/snapshot/snapshot.c ****         {
 319              		.loc 1 143 12 view .LVU86
 320 007a 042A     		cmp	r2, #4
 321 007c F0DD     		ble	.L15
 322              	.LBB12:
 146:emulator/snapshot/snapshot.c ****             if (compressed && data32 == COMPRESSION_END_MARKER)
 323              		.loc 1 146 13 is_stmt 1 view .LVU87
 146:emulator/snapshot/snapshot.c ****             if (compressed && data32 == COMPRESSION_END_MARKER)
 324              		.loc 1 146 44 is_stmt 0 view .LVU88
 325 007e 3219     		adds	r2, r6, r4
 326              	.LVL43:
 147:emulator/snapshot/snapshot.c **** 			{
 327              		.loc 1 147 13 is_stmt 1 view .LVU89
 152:emulator/snapshot/snapshot.c ****             if (compressed && data16 == COMPRESSION_SEQUENCE)
 328              		.loc 1 152 13 view .LVU90
 152:emulator/snapshot/snapshot.c ****             if (compressed && data16 == COMPRESSION_SEQUENCE)
 329              		.loc 1 152 22 is_stmt 0 view .LVU91
 330 0080 B2F80320 		ldrh	r2, [r2, #3]
 331              	.LVL44:
 153:emulator/snapshot/snapshot.c ****             {
 332              		.loc 1 153 13 is_stmt 1 view .LVU92
ARM GAS  /tmp/ccFtdM7s.s 			page 11


 153:emulator/snapshot/snapshot.c ****             {
 333              		.loc 1 153 16 is_stmt 0 view .LVU93
 334 0084 B8F1000F 		cmp	r8, #0
 335 0088 EAD0     		beq	.L15
 153:emulator/snapshot/snapshot.c ****             {
 336              		.loc 1 153 28 discriminator 1 view .LVU94
 337 008a 4EF6ED51 		movw	r1, #60909
 338 008e 8A42     		cmp	r2, r1
 339 0090 E6D1     		bne	.L15
 340              	.LBB11:
 155:emulator/snapshot/snapshot.c **** 
 341              		.loc 1 155 17 is_stmt 1 view .LVU95
 155:emulator/snapshot/snapshot.c **** 
 342              		.loc 1 155 19 is_stmt 0 view .LVU96
 343 0092 A31C     		adds	r3, r4, #2
 344              	.LVL45:
 155:emulator/snapshot/snapshot.c **** 
 345              		.loc 1 155 19 view .LVU97
 346 0094 9BB2     		uxth	r3, r3
 347              	.LVL46:
 157:emulator/snapshot/snapshot.c ****                 uint8_t value   = block->data[i];
 348              		.loc 1 157 17 is_stmt 1 view .LVU98
 157:emulator/snapshot/snapshot.c ****                 uint8_t value   = block->data[i];
 349              		.loc 1 157 48 is_stmt 0 view .LVU99
 350 0096 0334     		adds	r4, r4, #3
 351              	.LVL47:
 157:emulator/snapshot/snapshot.c ****                 uint8_t value   = block->data[i];
 352              		.loc 1 157 48 view .LVU100
 353 0098 A4B2     		uxth	r4, r4
 354              	.LVL48:
 157:emulator/snapshot/snapshot.c ****                 uint8_t value   = block->data[i];
 355              		.loc 1 157 25 view .LVU101
 356 009a 3344     		add	r3, r3, r6
 357 009c DB78     		ldrb	r3, [r3, #3]	@ zero_extendqisi2
 358              	.LVL49:
 158:emulator/snapshot/snapshot.c ****                 while (repeats--)
 359              		.loc 1 158 17 is_stmt 1 view .LVU102
 158:emulator/snapshot/snapshot.c ****                 while (repeats--)
 360              		.loc 1 158 25 is_stmt 0 view .LVU103
 361 009e 3219     		adds	r2, r6, r4
 362              	.LVL50:
 158:emulator/snapshot/snapshot.c ****                 while (repeats--)
 363              		.loc 1 158 25 view .LVU104
 364 00a0 92F803A0 		ldrb	r10, [r2, #3]	@ zero_extendqisi2
 365              	.LVL51:
 159:emulator/snapshot/snapshot.c ****                 {
 366              		.loc 1 159 17 is_stmt 1 view .LVU105
 159:emulator/snapshot/snapshot.c ****                 {
 367              		.loc 1 159 23 is_stmt 0 view .LVU106
 368 00a4 D7E7     		b	.L16
 369              	.LBE11:
 370              	.LBE12:
 371              	.LBE13:
 372              		.cfi_endproc
 373              	.LFE2:
 375              		.section	.text.snapshot_set_state,"ax",%progbits
 376              		.align	1
ARM GAS  /tmp/ccFtdM7s.s 			page 12


 377              		.syntax unified
 378              		.thumb
 379              		.thumb_func
 380              		.fpu softvfp
 382              	snapshot_set_state:
 383              	.LVL52:
 384              	.LFB0:
  51:emulator/snapshot/snapshot.c ****     Z80_STATE *cpu = emulator_cpu_state_get();
 385              		.loc 1 51 1 is_stmt 1 view -0
 386              		.cfi_startproc
 387              		@ args = 0, pretend = 0, frame = 0
 388              		@ frame_needed = 0, uses_anonymous_args = 0
  51:emulator/snapshot/snapshot.c ****     Z80_STATE *cpu = emulator_cpu_state_get();
 389              		.loc 1 51 1 is_stmt 0 view .LVU108
 390 0000 38B5     		push	{r3, r4, r5, lr}
 391              	.LCFI2:
 392              		.cfi_def_cfa_offset 16
 393              		.cfi_offset 3, -16
 394              		.cfi_offset 4, -12
 395              		.cfi_offset 5, -8
 396              		.cfi_offset 14, -4
 397 0002 0446     		mov	r4, r0
 398 0004 0D46     		mov	r5, r1
  52:emulator/snapshot/snapshot.c ****     uint8_t flags1 = (header->flags1.intr == 255) ? 1 : header->flags1.intr;
 399              		.loc 1 52 5 is_stmt 1 view .LVU109
  52:emulator/snapshot/snapshot.c ****     uint8_t flags1 = (header->flags1.intr == 255) ? 1 : header->flags1.intr;
 400              		.loc 1 52 22 is_stmt 0 view .LVU110
 401 0006 FFF7FEFF 		bl	emulator_cpu_state_get
 402              	.LVL53:
  53:emulator/snapshot/snapshot.c **** 
 403              		.loc 1 53 5 is_stmt 1 view .LVU111
  53:emulator/snapshot/snapshot.c **** 
 404              		.loc 1 53 37 is_stmt 0 view .LVU112
 405 000a 237B     		ldrb	r3, [r4, #12]	@ zero_extendqisi2
  53:emulator/snapshot/snapshot.c **** 
 406              		.loc 1 53 13 view .LVU113
 407 000c FF2B     		cmp	r3, #255
 408 000e 3AD0     		beq	.L31
 409              	.L27:
 410              	.LVL54:
  55:emulator/snapshot/snapshot.c **** 	cpu->registers.byte[Z80_F]  = header->f;
 411              		.loc 1 55 2 is_stmt 1 discriminator 4 view .LVU114
  55:emulator/snapshot/snapshot.c **** 	cpu->registers.byte[Z80_F]  = header->f;
 412              		.loc 1 55 38 is_stmt 0 discriminator 4 view .LVU115
 413 0010 2278     		ldrb	r2, [r4]	@ zero_extendqisi2
  55:emulator/snapshot/snapshot.c **** 	cpu->registers.byte[Z80_F]  = header->f;
 414              		.loc 1 55 30 discriminator 4 view .LVU116
 415 0012 C272     		strb	r2, [r0, #11]
  56:emulator/snapshot/snapshot.c **** 	cpu->registers.word[Z80_BC] = header->bc;
 416              		.loc 1 56 2 is_stmt 1 discriminator 4 view .LVU117
  56:emulator/snapshot/snapshot.c **** 	cpu->registers.word[Z80_BC] = header->bc;
 417              		.loc 1 56 38 is_stmt 0 discriminator 4 view .LVU118
 418 0014 6278     		ldrb	r2, [r4, #1]	@ zero_extendqisi2
  56:emulator/snapshot/snapshot.c **** 	cpu->registers.word[Z80_BC] = header->bc;
 419              		.loc 1 56 30 discriminator 4 view .LVU119
 420 0016 8272     		strb	r2, [r0, #10]
  57:emulator/snapshot/snapshot.c **** 	cpu->registers.word[Z80_HL] = header->hl;
ARM GAS  /tmp/ccFtdM7s.s 			page 13


 421              		.loc 1 57 2 is_stmt 1 discriminator 4 view .LVU120
  57:emulator/snapshot/snapshot.c **** 	cpu->registers.word[Z80_HL] = header->hl;
 422              		.loc 1 57 38 is_stmt 0 discriminator 4 view .LVU121
 423 0018 6288     		ldrh	r2, [r4, #2]	@ unaligned
  57:emulator/snapshot/snapshot.c **** 	cpu->registers.word[Z80_HL] = header->hl;
 424              		.loc 1 57 30 discriminator 4 view .LVU122
 425 001a 8280     		strh	r2, [r0, #4]	@ movhi
  58:emulator/snapshot/snapshot.c **** 	cpu->registers.word[Z80_SP] = header->sp;
 426              		.loc 1 58 2 is_stmt 1 discriminator 4 view .LVU123
  58:emulator/snapshot/snapshot.c **** 	cpu->registers.word[Z80_SP] = header->sp;
 427              		.loc 1 58 38 is_stmt 0 discriminator 4 view .LVU124
 428 001c A288     		ldrh	r2, [r4, #4]	@ unaligned
  58:emulator/snapshot/snapshot.c **** 	cpu->registers.word[Z80_SP] = header->sp;
 429              		.loc 1 58 30 discriminator 4 view .LVU125
 430 001e 0281     		strh	r2, [r0, #8]	@ movhi
  59:emulator/snapshot/snapshot.c **** 	cpu->i  = header->interrupt_register;
 431              		.loc 1 59 2 is_stmt 1 discriminator 4 view .LVU126
  59:emulator/snapshot/snapshot.c **** 	cpu->i  = header->interrupt_register;
 432              		.loc 1 59 38 is_stmt 0 discriminator 4 view .LVU127
 433 0020 2289     		ldrh	r2, [r4, #8]	@ unaligned
  59:emulator/snapshot/snapshot.c **** 	cpu->i  = header->interrupt_register;
 434              		.loc 1 59 30 discriminator 4 view .LVU128
 435 0022 0282     		strh	r2, [r0, #16]	@ movhi
  60:emulator/snapshot/snapshot.c **** 	cpu->r  = (header->refresh_register & 0x7F) | ((flags1 & 0x01) << 7);
 436              		.loc 1 60 2 is_stmt 1 discriminator 4 view .LVU129
  60:emulator/snapshot/snapshot.c **** 	cpu->r  = (header->refresh_register & 0x7F) | ((flags1 & 0x01) << 7);
 437              		.loc 1 60 18 is_stmt 0 discriminator 4 view .LVU130
 438 0024 A27A     		ldrb	r2, [r4, #10]	@ zero_extendqisi2
  60:emulator/snapshot/snapshot.c **** 	cpu->r  = (header->refresh_register & 0x7F) | ((flags1 & 0x01) << 7);
 439              		.loc 1 60 10 discriminator 4 view .LVU131
 440 0026 C261     		str	r2, [r0, #28]
  61:emulator/snapshot/snapshot.c **** 	cpu->im = header->flags2 & 0x3;
 441              		.loc 1 61 2 is_stmt 1 discriminator 4 view .LVU132
  61:emulator/snapshot/snapshot.c **** 	cpu->im = header->flags2 & 0x3;
 442              		.loc 1 61 19 is_stmt 0 discriminator 4 view .LVU133
 443 0028 E27A     		ldrb	r2, [r4, #11]	@ zero_extendqisi2
  61:emulator/snapshot/snapshot.c **** 	cpu->im = header->flags2 & 0x3;
 444              		.loc 1 61 38 discriminator 4 view .LVU134
 445 002a 02F07F02 		and	r2, r2, #127
  61:emulator/snapshot/snapshot.c **** 	cpu->im = header->flags2 & 0x3;
 446              		.loc 1 61 65 discriminator 4 view .LVU135
 447 002e 1946     		mov	r1, r3
 448 0030 DB01     		lsls	r3, r3, #7
 449              	.LVL55:
  61:emulator/snapshot/snapshot.c **** 	cpu->im = header->flags2 & 0x3;
 450              		.loc 1 61 65 discriminator 4 view .LVU136
 451 0032 DBB2     		uxtb	r3, r3
  61:emulator/snapshot/snapshot.c **** 	cpu->im = header->flags2 & 0x3;
 452              		.loc 1 61 46 discriminator 4 view .LVU137
 453 0034 1343     		orrs	r3, r3, r2
  61:emulator/snapshot/snapshot.c **** 	cpu->im = header->flags2 & 0x3;
 454              		.loc 1 61 10 discriminator 4 view .LVU138
 455 0036 0362     		str	r3, [r0, #32]
  62:emulator/snapshot/snapshot.c **** 	cpu->registers.word[Z80_DE] = header->de;
 456              		.loc 1 62 2 is_stmt 1 discriminator 4 view .LVU139
  62:emulator/snapshot/snapshot.c **** 	cpu->registers.word[Z80_DE] = header->de;
 457              		.loc 1 62 18 is_stmt 0 discriminator 4 view .LVU140
ARM GAS  /tmp/ccFtdM7s.s 			page 14


 458 0038 637F     		ldrb	r3, [r4, #29]	@ zero_extendqisi2
  62:emulator/snapshot/snapshot.c **** 	cpu->registers.word[Z80_DE] = header->de;
 459              		.loc 1 62 27 discriminator 4 view .LVU141
 460 003a 03F00303 		and	r3, r3, #3
  62:emulator/snapshot/snapshot.c **** 	cpu->registers.word[Z80_DE] = header->de;
 461              		.loc 1 62 10 discriminator 4 view .LVU142
 462 003e 0363     		str	r3, [r0, #48]
  63:emulator/snapshot/snapshot.c **** 	cpu->alternates[Z80_BC] = header->bc_dash;
 463              		.loc 1 63 2 is_stmt 1 discriminator 4 view .LVU143
  63:emulator/snapshot/snapshot.c **** 	cpu->alternates[Z80_BC] = header->bc_dash;
 464              		.loc 1 63 38 is_stmt 0 discriminator 4 view .LVU144
 465 0040 B4F80D30 		ldrh	r3, [r4, #13]	@ unaligned
  63:emulator/snapshot/snapshot.c **** 	cpu->alternates[Z80_BC] = header->bc_dash;
 466              		.loc 1 63 30 discriminator 4 view .LVU145
 467 0044 C380     		strh	r3, [r0, #6]	@ movhi
  64:emulator/snapshot/snapshot.c **** 	cpu->alternates[Z80_DE] = header->de_dash;
 468              		.loc 1 64 2 is_stmt 1 discriminator 4 view .LVU146
  64:emulator/snapshot/snapshot.c **** 	cpu->alternates[Z80_DE] = header->de_dash;
 469              		.loc 1 64 34 is_stmt 0 discriminator 4 view .LVU147
 470 0046 B4F80F30 		ldrh	r3, [r4, #15]	@ unaligned
  64:emulator/snapshot/snapshot.c **** 	cpu->alternates[Z80_DE] = header->de_dash;
 471              		.loc 1 64 26 discriminator 4 view .LVU148
 472 004a 4382     		strh	r3, [r0, #18]	@ movhi
  65:emulator/snapshot/snapshot.c **** 	cpu->alternates[Z80_HL] = header->hl_dash;
 473              		.loc 1 65 2 is_stmt 1 discriminator 4 view .LVU149
  65:emulator/snapshot/snapshot.c **** 	cpu->alternates[Z80_HL] = header->hl_dash;
 474              		.loc 1 65 34 is_stmt 0 discriminator 4 view .LVU150
 475 004c B4F81130 		ldrh	r3, [r4, #17]	@ unaligned
  65:emulator/snapshot/snapshot.c **** 	cpu->alternates[Z80_HL] = header->hl_dash;
 476              		.loc 1 65 26 discriminator 4 view .LVU151
 477 0050 8382     		strh	r3, [r0, #20]	@ movhi
  66:emulator/snapshot/snapshot.c **** 	cpu->alternates[Z80_AF] = header->f_dash | (header->a_dash << 8);
 478              		.loc 1 66 2 is_stmt 1 discriminator 4 view .LVU152
  66:emulator/snapshot/snapshot.c **** 	cpu->alternates[Z80_AF] = header->f_dash | (header->a_dash << 8);
 479              		.loc 1 66 34 is_stmt 0 discriminator 4 view .LVU153
 480 0052 B4F81330 		ldrh	r3, [r4, #19]	@ unaligned
  66:emulator/snapshot/snapshot.c **** 	cpu->alternates[Z80_AF] = header->f_dash | (header->a_dash << 8);
 481              		.loc 1 66 26 discriminator 4 view .LVU154
 482 0056 C382     		strh	r3, [r0, #22]	@ movhi
  67:emulator/snapshot/snapshot.c **** 	cpu->registers.word[Z80_IY] = header->IY;
 483              		.loc 1 67 2 is_stmt 1 discriminator 4 view .LVU155
  67:emulator/snapshot/snapshot.c **** 	cpu->registers.word[Z80_IY] = header->IY;
 484              		.loc 1 67 34 is_stmt 0 discriminator 4 view .LVU156
 485 0058 A37D     		ldrb	r3, [r4, #22]	@ zero_extendqisi2
  67:emulator/snapshot/snapshot.c **** 	cpu->registers.word[Z80_IY] = header->IY;
 486              		.loc 1 67 52 discriminator 4 view .LVU157
 487 005a 627D     		ldrb	r2, [r4, #21]	@ zero_extendqisi2
  67:emulator/snapshot/snapshot.c **** 	cpu->registers.word[Z80_IY] = header->IY;
 488              		.loc 1 67 43 discriminator 4 view .LVU158
 489 005c 43EA0223 		orr	r3, r3, r2, lsl #8
  67:emulator/snapshot/snapshot.c **** 	cpu->registers.word[Z80_IY] = header->IY;
 490              		.loc 1 67 26 discriminator 4 view .LVU159
 491 0060 0383     		strh	r3, [r0, #24]	@ movhi
  68:emulator/snapshot/snapshot.c **** 	cpu->registers.word[Z80_IX] = header->IX;
 492              		.loc 1 68 2 is_stmt 1 discriminator 4 view .LVU160
  68:emulator/snapshot/snapshot.c **** 	cpu->registers.word[Z80_IX] = header->IX;
 493              		.loc 1 68 38 is_stmt 0 discriminator 4 view .LVU161
ARM GAS  /tmp/ccFtdM7s.s 			page 15


 494 0062 B4F81730 		ldrh	r3, [r4, #23]	@ unaligned
  68:emulator/snapshot/snapshot.c **** 	cpu->registers.word[Z80_IX] = header->IX;
 495              		.loc 1 68 30 discriminator 4 view .LVU162
 496 0066 C381     		strh	r3, [r0, #14]	@ movhi
  69:emulator/snapshot/snapshot.c **** 	cpu->iff1 = header->interrupt_flip_flop;
 497              		.loc 1 69 2 is_stmt 1 discriminator 4 view .LVU163
  69:emulator/snapshot/snapshot.c **** 	cpu->iff1 = header->interrupt_flip_flop;
 498              		.loc 1 69 38 is_stmt 0 discriminator 4 view .LVU164
 499 0068 B4F81930 		ldrh	r3, [r4, #25]	@ unaligned
  69:emulator/snapshot/snapshot.c **** 	cpu->iff1 = header->interrupt_flip_flop;
 500              		.loc 1 69 30 discriminator 4 view .LVU165
 501 006c 8381     		strh	r3, [r0, #12]	@ movhi
  70:emulator/snapshot/snapshot.c **** 	cpu->iff2 = header->IFF2;
 502              		.loc 1 70 2 is_stmt 1 discriminator 4 view .LVU166
  70:emulator/snapshot/snapshot.c **** 	cpu->iff2 = header->IFF2;
 503              		.loc 1 70 20 is_stmt 0 discriminator 4 view .LVU167
 504 006e E37E     		ldrb	r3, [r4, #27]	@ zero_extendqisi2
  70:emulator/snapshot/snapshot.c **** 	cpu->iff2 = header->IFF2;
 505              		.loc 1 70 12 discriminator 4 view .LVU168
 506 0070 8362     		str	r3, [r0, #40]
  71:emulator/snapshot/snapshot.c ****     if (add_header != 0)
 507              		.loc 1 71 2 is_stmt 1 discriminator 4 view .LVU169
  71:emulator/snapshot/snapshot.c ****     if (add_header != 0)
 508              		.loc 1 71 20 is_stmt 0 discriminator 4 view .LVU170
 509 0072 237F     		ldrb	r3, [r4, #28]	@ zero_extendqisi2
  71:emulator/snapshot/snapshot.c ****     if (add_header != 0)
 510              		.loc 1 71 12 discriminator 4 view .LVU171
 511 0074 C362     		str	r3, [r0, #44]
  72:emulator/snapshot/snapshot.c ****     {
 512              		.loc 1 72 5 is_stmt 1 discriminator 4 view .LVU172
  72:emulator/snapshot/snapshot.c ****     {
 513              		.loc 1 72 8 is_stmt 0 discriminator 4 view .LVU173
 514 0076 45B1     		cbz	r5, .L28
  74:emulator/snapshot/snapshot.c ****     }
 515              		.loc 1 74 6 is_stmt 1 view .LVU174
  74:emulator/snapshot/snapshot.c ****     }
 516              		.loc 1 74 28 is_stmt 0 view .LVU175
 517 0078 6B88     		ldrh	r3, [r5, #2]	@ unaligned
  74:emulator/snapshot/snapshot.c ****     }
 518              		.loc 1 74 16 view .LVU176
 519 007a 4362     		str	r3, [r0, #36]
 520              	.L29:
  79:emulator/snapshot/snapshot.c **** }
 521              		.loc 1 79 5 is_stmt 1 view .LVU177
 522 007c C1F34200 		ubfx	r0, r1, #1, #3
 523              	.LVL56:
  79:emulator/snapshot/snapshot.c **** }
 524              		.loc 1 79 5 is_stmt 0 view .LVU178
 525 0080 FFF7FEFF 		bl	screen_draw_border
 526              	.LVL57:
  80:emulator/snapshot/snapshot.c **** 
 527              		.loc 1 80 1 view .LVU179
 528 0084 38BD     		pop	{r3, r4, r5, pc}
 529              	.LVL58:
 530              	.L31:
  53:emulator/snapshot/snapshot.c **** 
 531              		.loc 1 53 13 view .LVU180
ARM GAS  /tmp/ccFtdM7s.s 			page 16


 532 0086 0123     		movs	r3, #1
 533 0088 C2E7     		b	.L27
 534              	.L28:
  77:emulator/snapshot/snapshot.c ****     }
 535              		.loc 1 77 9 is_stmt 1 view .LVU181
  77:emulator/snapshot/snapshot.c ****     }
 536              		.loc 1 77 25 is_stmt 0 view .LVU182
 537 008a E388     		ldrh	r3, [r4, #6]	@ unaligned
  77:emulator/snapshot/snapshot.c ****     }
 538              		.loc 1 77 17 view .LVU183
 539 008c 4362     		str	r3, [r0, #36]
 540 008e F5E7     		b	.L29
 541              		.cfi_endproc
 542              	.LFE0:
 544              		.section	.rodata.snapshot_load.str1.4,"aMS",%progbits,1
 545              		.align	2
 546              	.LC0:
 547 0000 332E3000 		.ascii	"3.0\000"
 548              		.align	2
 549              	.LC1:
 550 0004 322E3100 		.ascii	"2.1\000"
 551              		.align	2
 552              	.LC2:
 553 0008 496E7661 		.ascii	"Invalid file version %04X\015\012\000"
 553      6C696420 
 553      66696C65 
 553      20766572 
 553      73696F6E 
 554              		.align	2
 555              	.LC3:
 556 0024 4E6F7420 		.ascii	"Not supported hardware version %02X\015\012\000"
 556      73757070 
 556      6F727465 
 556      64206861 
 556      72647761 
 557 004a 0000     		.align	2
 558              	.LC4:
 559 004c 536E6170 		.ascii	"Snapshot header version %s\015\012\000"
 559      73686F74 
 559      20686561 
 559      64657220 
 559      76657273 
 560 0069 000000   		.align	2
 561              	.LC5:
 562 006c 48617264 		.ascii	"Hardware mode %02X\015\012\000"
 562      77617265 
 562      206D6F64 
 562      65202530 
 562      32580D0A 
 563 0081 000000   		.align	2
 564              	.LC6:
 565 0084 6F666673 		.ascii	"offset %d\015\012\000"
 565      65742025 
 565      640D0A00 
 566              		.align	2
 567              	.LC7:
 568 0090 536E6170 		.ascii	"Snapshot header version unsupported %04X\015\012\000"
ARM GAS  /tmp/ccFtdM7s.s 			page 17


 568      73686F74 
 568      20686561 
 568      64657220 
 568      76657273 
 569              		.section	.text.snapshot_load,"ax",%progbits
 570              		.align	1
 571              		.global	snapshot_load
 572              		.syntax unified
 573              		.thumb
 574              		.thumb_func
 575              		.fpu softvfp
 577              	snapshot_load:
 578              	.LVL59:
 579              	.LFB3:
 171:emulator/snapshot/snapshot.c **** 
 172:emulator/snapshot/snapshot.c **** bool snapshot_load(const uint8_t *buffer, uint16_t buffer_len)
 173:emulator/snapshot/snapshot.c **** {
 580              		.loc 1 173 1 is_stmt 1 view -0
 581              		.cfi_startproc
 582              		@ args = 0, pretend = 0, frame = 0
 583              		@ frame_needed = 0, uses_anonymous_args = 0
 584              		.loc 1 173 1 is_stmt 0 view .LVU185
 585 0000 70B5     		push	{r4, r5, r6, lr}
 586              	.LCFI3:
 587              		.cfi_def_cfa_offset 16
 588              		.cfi_offset 4, -16
 589              		.cfi_offset 5, -12
 590              		.cfi_offset 6, -8
 591              		.cfi_offset 14, -4
 592 0002 0546     		mov	r5, r0
 593 0004 0C46     		mov	r4, r1
 174:emulator/snapshot/snapshot.c ****     const snapshot_header_t *header = (const snapshot_header_t *) buffer;
 594              		.loc 1 174 5 is_stmt 1 view .LVU186
 595              	.LVL60:
 175:emulator/snapshot/snapshot.c ****     uint16_t offset = sizeof(*header);
 596              		.loc 1 175 5 view .LVU187
 176:emulator/snapshot/snapshot.c ****     if (header->version != SNAPSHOT_FILE_VERSION_VALID)
 597              		.loc 1 176 5 view .LVU188
 598              		.loc 1 176 15 is_stmt 0 view .LVU189
 599 0006 C188     		ldrh	r1, [r0, #6]	@ unaligned
 600              	.LVL61:
 601              		.loc 1 176 8 view .LVU190
 602 0008 11BB     		cbnz	r1, .L43
 177:emulator/snapshot/snapshot.c ****     {
 178:emulator/snapshot/snapshot.c ****         logger("Invalid file version %04X\r\n", header->version);
 179:emulator/snapshot/snapshot.c ****         snapshot_set_state(header, 0);
 180:emulator/snapshot/snapshot.c ****         snapshot_decompression1(&buffer[offset], buffer_len - offset);
 181:emulator/snapshot/snapshot.c ****         return false;
 182:emulator/snapshot/snapshot.c ****     }
 183:emulator/snapshot/snapshot.c **** 
 184:emulator/snapshot/snapshot.c ****     
 185:emulator/snapshot/snapshot.c ****     const snapshot_add_header_t *add_header = (const snapshot_add_header_t *) &buffer[offset];
 603              		.loc 1 185 5 is_stmt 1 view .LVU191
 604              		.loc 1 185 34 is_stmt 0 view .LVU192
 605 000a 00F11E04 		add	r4, r0, #30
 606              	.LVL62:
 186:emulator/snapshot/snapshot.c ****     if (add_header->hardware_mode != HARDWARE_MODE_0 &&
ARM GAS  /tmp/ccFtdM7s.s 			page 18


 607              		.loc 1 186 5 is_stmt 1 view .LVU193
 608              		.loc 1 186 19 is_stmt 0 view .LVU194
 609 000e 90F82210 		ldrb	r1, [r0, #34]	@ zero_extendqisi2
 610              		.loc 1 186 8 view .LVU195
 611 0012 0129     		cmp	r1, #1
 612 0014 2CD8     		bhi	.L44
 613              	.LVL63:
 614              	.L35:
 187:emulator/snapshot/snapshot.c ****         add_header->hardware_mode != HARDWARE_MODE_1)
 188:emulator/snapshot/snapshot.c ****     {
 189:emulator/snapshot/snapshot.c ****         logger("Not supported hardware version %02X\r\n", add_header->hardware_mode);
 190:emulator/snapshot/snapshot.c ****         // return false;
 191:emulator/snapshot/snapshot.c ****     }
 192:emulator/snapshot/snapshot.c **** 
 193:emulator/snapshot/snapshot.c ****     if (add_header->header_len == SNAPSHOT_LENGTH_MEANS_VERSION_2_1 ||
 615              		.loc 1 193 5 is_stmt 1 view .LVU196
 616              		.loc 1 193 19 is_stmt 0 view .LVU197
 617 0016 E98B     		ldrh	r1, [r5, #30]	@ unaligned
 618              		.loc 1 193 8 view .LVU198
 619 0018 1729     		cmp	r1, #23
 620 001a 01D0     		beq	.L36
 621              		.loc 1 193 69 discriminator 1 view .LVU199
 622 001c 3629     		cmp	r1, #54
 623 001e 2DD1     		bne	.L37
 624              	.L36:
 194:emulator/snapshot/snapshot.c ****         add_header->header_len == SNAPSHOT_LENGTH_MEANS_VERSION_3_0)
 195:emulator/snapshot/snapshot.c ****     {
 196:emulator/snapshot/snapshot.c ****         logger("Snapshot header version %s\r\n", SNAPSHOT_LENGTH_TO_VERSION(add_header->header_len)
 625              		.loc 1 196 9 is_stmt 1 view .LVU200
 626 0020 1729     		cmp	r1, #23
 627 0022 29D0     		beq	.L45
 628 0024 2149     		ldr	r1, .L46
 629              	.L38:
 630              		.loc 1 196 9 is_stmt 0 discriminator 4 view .LVU201
 631 0026 2248     		ldr	r0, .L46+4
 632 0028 FFF7FEFF 		bl	logger
 633              	.LVL64:
 197:emulator/snapshot/snapshot.c ****         logger("Hardware mode %02X\r\n", add_header->hardware_mode);
 634              		.loc 1 197 9 is_stmt 1 discriminator 4 view .LVU202
 635 002c 95F82210 		ldrb	r1, [r5, #34]	@ zero_extendqisi2
 636 0030 2048     		ldr	r0, .L46+8
 637 0032 FFF7FEFF 		bl	logger
 638              	.LVL65:
 198:emulator/snapshot/snapshot.c ****     }
 199:emulator/snapshot/snapshot.c ****     else
 200:emulator/snapshot/snapshot.c ****     {
 201:emulator/snapshot/snapshot.c ****         logger("Snapshot header version unsupported %04X\r\n", add_header->header_len);
 202:emulator/snapshot/snapshot.c ****         return false;
 203:emulator/snapshot/snapshot.c ****     }
 204:emulator/snapshot/snapshot.c **** 
 205:emulator/snapshot/snapshot.c ****     snapshot_set_state(header, add_header);
 639              		.loc 1 205 5 discriminator 4 view .LVU203
 640 0036 2146     		mov	r1, r4
 641 0038 2846     		mov	r0, r5
 642 003a FFF7FEFF 		bl	snapshot_set_state
 643              	.LVL66:
 206:emulator/snapshot/snapshot.c **** 
ARM GAS  /tmp/ccFtdM7s.s 			page 19


 207:emulator/snapshot/snapshot.c ****     offset += add_header->header_len + 2; logger("offset %d\r\n", offset);
 644              		.loc 1 207 5 discriminator 4 view .LVU204
 645              		.loc 1 207 25 is_stmt 0 discriminator 4 view .LVU205
 646 003e E98B     		ldrh	r1, [r5, #30]	@ unaligned
 647              		.loc 1 207 12 discriminator 4 view .LVU206
 648 0040 2031     		adds	r1, r1, #32
 649 0042 8EB2     		uxth	r6, r1
 650              	.LVL67:
 651              		.loc 1 207 43 is_stmt 1 discriminator 4 view .LVU207
 652 0044 3146     		mov	r1, r6
 653 0046 1C48     		ldr	r0, .L46+12
 654 0048 FFF7FEFF 		bl	logger
 655              	.LVL68:
 208:emulator/snapshot/snapshot.c ****     const block_info_t *mem_block = (const block_info_t *) &buffer[offset];
 656              		.loc 1 208 5 discriminator 4 view .LVU208
 657              		.loc 1 208 25 is_stmt 0 discriminator 4 view .LVU209
 658 004c AC19     		adds	r4, r5, r6
 659              	.LVL69:
 209:emulator/snapshot/snapshot.c ****     while (mem_block->page_type == PAGE_TYPE_4 ||
 660              		.loc 1 209 5 is_stmt 1 discriminator 4 view .LVU210
 661              		.loc 1 209 11 is_stmt 0 discriminator 4 view .LVU211
 662 004e 23E0     		b	.L39
 663              	.LVL70:
 664              	.L43:
 178:emulator/snapshot/snapshot.c ****         snapshot_set_state(header, 0);
 665              		.loc 1 178 9 is_stmt 1 view .LVU212
 666 0050 1A48     		ldr	r0, .L46+16
 667              	.LVL71:
 178:emulator/snapshot/snapshot.c ****         snapshot_set_state(header, 0);
 668              		.loc 1 178 9 is_stmt 0 view .LVU213
 669 0052 FFF7FEFF 		bl	logger
 670              	.LVL72:
 179:emulator/snapshot/snapshot.c ****         snapshot_decompression1(&buffer[offset], buffer_len - offset);
 671              		.loc 1 179 9 is_stmt 1 view .LVU214
 672 0056 0021     		movs	r1, #0
 673 0058 2846     		mov	r0, r5
 674 005a FFF7FEFF 		bl	snapshot_set_state
 675              	.LVL73:
 180:emulator/snapshot/snapshot.c ****         return false;
 676              		.loc 1 180 9 view .LVU215
 677 005e A4F11E01 		sub	r1, r4, #30
 678 0062 89B2     		uxth	r1, r1
 679 0064 05F11E00 		add	r0, r5, #30
 680 0068 FFF7FEFF 		bl	snapshot_decompression1
 681              	.LVL74:
 181:emulator/snapshot/snapshot.c ****     }
 682              		.loc 1 181 9 view .LVU216
 181:emulator/snapshot/snapshot.c ****     }
 683              		.loc 1 181 16 is_stmt 0 view .LVU217
 684 006c 0020     		movs	r0, #0
 685 006e 1BE0     		b	.L34
 686              	.LVL75:
 687              	.L44:
 189:emulator/snapshot/snapshot.c ****         // return false;
 688              		.loc 1 189 9 is_stmt 1 view .LVU218
 689 0070 1348     		ldr	r0, .L46+20
 690              	.LVL76:
ARM GAS  /tmp/ccFtdM7s.s 			page 20


 189:emulator/snapshot/snapshot.c ****         // return false;
 691              		.loc 1 189 9 is_stmt 0 view .LVU219
 692 0072 FFF7FEFF 		bl	logger
 693              	.LVL77:
 694 0076 CEE7     		b	.L35
 695              	.L45:
 196:emulator/snapshot/snapshot.c ****         logger("Hardware mode %02X\r\n", add_header->hardware_mode);
 696              		.loc 1 196 9 view .LVU220
 697 0078 1249     		ldr	r1, .L46+24
 698 007a D4E7     		b	.L38
 699              	.L37:
 201:emulator/snapshot/snapshot.c ****         return false;
 700              		.loc 1 201 9 is_stmt 1 view .LVU221
 701 007c 1248     		ldr	r0, .L46+28
 702 007e FFF7FEFF 		bl	logger
 703              	.LVL78:
 202:emulator/snapshot/snapshot.c ****     }
 704              		.loc 1 202 9 view .LVU222
 202:emulator/snapshot/snapshot.c ****     }
 705              		.loc 1 202 16 is_stmt 0 view .LVU223
 706 0082 0020     		movs	r0, #0
 707 0084 10E0     		b	.L34
 708              	.LVL79:
 709              	.L40:
 210:emulator/snapshot/snapshot.c ****            mem_block->page_type == PAGE_TYPE_5 ||
 211:emulator/snapshot/snapshot.c ****            mem_block->page_type == PAGE_TYPE_8)
 212:emulator/snapshot/snapshot.c ****     {
 213:emulator/snapshot/snapshot.c ****             snapshot_decompression(mem_block);
 710              		.loc 1 213 13 is_stmt 1 view .LVU224
 711 0086 2046     		mov	r0, r4
 712 0088 FFF7FEFF 		bl	snapshot_decompression
 713              	.LVL80:
 214:emulator/snapshot/snapshot.c **** 
 215:emulator/snapshot/snapshot.c ****             offset += mem_block->len + sizeof(*mem_block);
 714              		.loc 1 215 13 view .LVU225
 715              		.loc 1 215 32 is_stmt 0 view .LVU226
 716 008c 2188     		ldrh	r1, [r4]	@ unaligned
 717              		.loc 1 215 20 view .LVU227
 718 008e 3144     		add	r1, r1, r6
 719 0090 89B2     		uxth	r1, r1
 720 0092 0331     		adds	r1, r1, #3
 721 0094 8EB2     		uxth	r6, r1
 722              	.LVL81:
 216:emulator/snapshot/snapshot.c ****             mem_block = (const block_info_t *) &buffer[offset];
 723              		.loc 1 216 13 is_stmt 1 view .LVU228
 724              		.loc 1 216 23 is_stmt 0 view .LVU229
 725 0096 AC19     		adds	r4, r5, r6
 726              	.LVL82:
 727              	.L39:
 209:emulator/snapshot/snapshot.c ****            mem_block->page_type == PAGE_TYPE_5 ||
 728              		.loc 1 209 11 is_stmt 1 view .LVU230
 209:emulator/snapshot/snapshot.c ****            mem_block->page_type == PAGE_TYPE_5 ||
 729              		.loc 1 209 21 is_stmt 0 view .LVU231
 730 0098 A278     		ldrb	r2, [r4, #2]	@ zero_extendqisi2
 209:emulator/snapshot/snapshot.c ****            mem_block->page_type == PAGE_TYPE_5 ||
 731              		.loc 1 209 48 view .LVU232
 732 009a 131F     		subs	r3, r2, #4
ARM GAS  /tmp/ccFtdM7s.s 			page 21


 733 009c DBB2     		uxtb	r3, r3
 209:emulator/snapshot/snapshot.c ****            mem_block->page_type == PAGE_TYPE_5 ||
 734              		.loc 1 209 11 view .LVU233
 735 009e 012B     		cmp	r3, #1
 736 00a0 F1D9     		bls	.L40
 210:emulator/snapshot/snapshot.c ****            mem_block->page_type == PAGE_TYPE_8)
 737              		.loc 1 210 48 view .LVU234
 738 00a2 082A     		cmp	r2, #8
 739 00a4 EFD0     		beq	.L40
 217:emulator/snapshot/snapshot.c ****     }
 218:emulator/snapshot/snapshot.c **** 
 219:emulator/snapshot/snapshot.c ****     return true;
 740              		.loc 1 219 12 view .LVU235
 741 00a6 0120     		movs	r0, #1
 742              	.LVL83:
 743              	.L34:
 220:emulator/snapshot/snapshot.c **** }...
 744              		.loc 1 220 1 view .LVU236
 745 00a8 70BD     		pop	{r4, r5, r6, pc}
 746              	.LVL84:
 747              	.L47:
 748              		.loc 1 220 1 view .LVU237
 749 00aa 00BF     		.align	2
 750              	.L46:
 751 00ac 00000000 		.word	.LC0
 752 00b0 4C000000 		.word	.LC4
 753 00b4 6C000000 		.word	.LC5
 754 00b8 84000000 		.word	.LC6
 755 00bc 08000000 		.word	.LC2
 756 00c0 24000000 		.word	.LC3
 757 00c4 04000000 		.word	.LC1
 758 00c8 90000000 		.word	.LC7
 759              		.cfi_endproc
 760              	.LFE3:
 762              		.text
 763              	.Letext0:
 764              		.file 2 "/usr/lib/gcc/arm-none-eabi/9.2.1/include/stdint.h"
 765              		.file 3 "emulator/snapshot/snapshot.h"
 766              		.file 4 "emulator/z80emu/z80emu.h"
 767              		.file 5 "logger/logger.h"
 768              		.file 6 "emulator/mem/mem.h"
 769              		.file 7 "emulator/emulator.h"
 770              		.file 8 "emulator/video/screen.h"
ARM GAS  /tmp/ccFtdM7s.s 			page 22


DEFINED SYMBOLS
                            *ABS*:0000000000000000 snapshot.c
     /tmp/ccFtdM7s.s:16     .text.snapshot_decompression1:0000000000000000 $t
     /tmp/ccFtdM7s.s:23     .text.snapshot_decompression1:0000000000000000 snapshot_decompression1
     /tmp/ccFtdM7s.s:169    .text.snapshot_decompression:0000000000000000 $t
     /tmp/ccFtdM7s.s:175    .text.snapshot_decompression:0000000000000000 snapshot_decompression
     /tmp/ccFtdM7s.s:376    .text.snapshot_set_state:0000000000000000 $t
     /tmp/ccFtdM7s.s:382    .text.snapshot_set_state:0000000000000000 snapshot_set_state
     /tmp/ccFtdM7s.s:545    .rodata.snapshot_load.str1.4:0000000000000000 $d
     /tmp/ccFtdM7s.s:570    .text.snapshot_load:0000000000000000 $t
     /tmp/ccFtdM7s.s:577    .text.snapshot_load:0000000000000000 snapshot_load
     /tmp/ccFtdM7s.s:751    .text.snapshot_load:00000000000000ac $d

UNDEFINED SYMBOLS
mem_writebyte
emulator_cpu_state_get
screen_draw_border
logger
